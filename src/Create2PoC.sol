pragma solidity >= 0.8.0;

contract Simple {

    uint public stateVar;
    constructor() {
        stateVar = 5;
    }

    function changeStateVar(uint newVar) public {
        stateVar = newVar;
    }
}

contract DeploySimpleCreate2 {
    function deploySimple(bytes memory byteCode, uint salt) public returns(address newContract) {
        uint codeLength = byteCode.length;
        // bytes memory byteCode = '0x608060405234801561001057600080fd5b506005600081905550610133806100286000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c80630a099f34146037578063793816ec14604f575b600080fd5b604d600480360381019060499190608c565b6069565b005b60556073565b6040516060919060c1565b60405180910390f35b8060008190555050565b60005481565b60008135905060868160e9565b92915050565b600060208284031215609f57609e60e4565b5b600060ab848285016079565b91505092915050565b60bb8160da565b82525050565b600060208201905060d4600083018460b4565b92915050565b6000819050919050565b600080fd5b60f08160da565b811460fa57600080fd5b5056fea26469706673582212202a56b0cdf46090827cebc2cece819754abf6acbdab64caf9d96a0fac1dfe666e64736f6c63430008070033';
        assembly {
            newContract := create2(0, 0xa0, codeLength, salt)    
        }
    }
}